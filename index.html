<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Trabalho 2 de Computação Grafica - Lost City</title>
  
  <script src="https://aframe.io/releases/1.7.1/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-environment-component@1.5.x/dist/aframe-environment-component.min.js"></script>
  <script src="https://raw.githack.com/protyze/aframe-curve-component/master/dist/aframe-curve-component.min.js"></script>
  <script src="https://raw.githack.com/protyze/aframe-alongpath-component/master/dist/aframe-alongpath-component.min.js"></script>

  <script src="./src/main.js"></script>
</head>

<body>

  <a-scene>

    <a-assets>
      <a-asset-item id="modelo-carro" src="./Assets/1994_toyota_supra_mk_iv_bomex_fast__furious.glb"></a-asset-item>
      <a-asset-item id="carro-policial" src="./Assets/police_car.glb"></a-asset-item>
      <a-asset-item id="skyline-brian" src="./Assets/1999_nissan_skyline_gtr_r34_c-west__2f2f.glb"></a-asset-item>
      <a-asset-item id="cenario" src="./Assets/beautiful_city.glb"></a-asset-item>
      <a-asset-item id="lowrider" src="./Assets/cartoon_low_poly_chrysler_new_yorker_1980.glb"></a-asset-item>
      <a-asset-item id="rally-carro" src="./Assets/evo_rally_car.glb"></a-asset-item>
      <a-asset-item id="curve-street" src="./Assets/curvas.glb"></a-asset-item>
      <a-asset-item id="mitsubishi_carro" src="./Assets/mitsubishi_minicab_2005.glb"></a-asset-item>
      <audio id="carro-musica" src="./Sound/Tokyo Drift - Teriyaki Boyz [ MUSIC VIDEO ] HD [iuJDhFRDx9M].mp3"></audio>
      <audio id="radio-carro" src="./Sound/radio.mp3"></audio>
    </a-assets>

    <a-entity environment="preset: tron; 
                           lightPosition: 0 2 0; 
                           dressingScale: 0.5; 
                           dressingAmount:30">
    </a-entity>

    <a-entity gltf-model="#cenario" 
              position="0 2.8 0" 
              scale="5 5 3.5" 
              rotation="0 0 0">
    </a-entity>

    <a-entity gltf-model="#cenario" 
              position="34 2.8 5" 
              scale="5 5 3.5" 
              rotation="0 180 0">
    </a-entity>

    <a-entity gltf-model="#cenario" 
              position="0 2.8 31.8" 
              scale="5 5 3.5" 
              rotation="0 360 0">
    </a-entity>

    <a-entity gltf-model="#curve-street" 
              position="49 0.3 38.6" 
              scale="2 2 2" 
              rotation="0 180 0">
    </a-entity>

    <a-entity gltf-model="#modelo-carro"
              position="0 0.34 3.5"
              rotation="0 90 0"
              scale="50 50 50"
              animation__move="property: position; 
                               to: 54 0.34 3.5; 
                               dur: 3000; 
                               dir: alternate; 
                               loop: true"
              animation="property: rotation; 
                         to: 0 -180 0; 
                         loop: true; 
                         dur: 5000; 
                         easing: linear">
    </a-entity>

    <a-entity gltf-model="#carro-policial"
        position="-8 0.5 3.5"
        rotation="0 90 0"
        scale="0.4 0.4 0.4"
        animation__move="property: position; 
                         to: 54 0.5 3.5; 
                         dur: 3000; 
                         dir: alternate; 
                         loop: true">
    </a-entity>

    <a-entity position="-21.5 -0.03 3" 
        animation="property: rotation; 
                   to: 0 -360 0; 
                   loop: true; 
                   dur: 5000; 
                   easing: linear">
       <a-entity gltf-model="#skyline-brian" 
                 position="0 0.5 -4" 
                 rotation="0 0 0" 
                 scale="65 65 65">
       </a-entity>
    </a-entity>
    
    <a-entity gltf-model="#rally-carro"
        position="-30 0 35"
        rotation="0 90 0"
        scale="0.4 0.4 0.4"
        animation__reta="property: position; 
                         to: 50 0 35; 
                         dur: 5000; 
                         easing: linear; 
                         startEvents: loaded, animationcomplete__reset_pos" 
        animation__curva_move="property: position; 
                               to: 56 0 2.5; 
                               dur: 5000; 
                               easing: easeOutQuad; 
                               startEvents: animationcomplete__reta"
        animation__curva_gira="property: rotation; 
                               to: 0 -90 0; 
                               dur: 2000; 
                               easing: easeOutQuad;
                               startEvents: animationcomplete__reta" 
        animation__reta_final="property: position;
                               to: 1 0 1;
                               dur: 3000;
                               easing: linear;
                               startEvents: animationcomplete__curva_move"
        animation__reset_pos="property: position; 
                              to: -30 0 35; 
                              dur: 0; 
                              startEvents: animationcomplete__reta_final"
                              
        animation__reset_rot="property: rotation; 
                              to: 0 90 0; 
                              dur: 0; 
                              startEvents: animationcomplete__reta_final">
    </a-entity>

    <a-entity gltf-model="#mitsubishi_carro"
        radio-interativo class="clickable"
        position="-30 1.2 33"
        rotation="0 -180 0"
        scale="0.3 0.3 0.3"
        sound="src: #radio-carro;
           autoplay: false;
           loop: true;
           volume: 1;
           positional: true;
           refDistance: 3;
           rolloffFactor: 1"
        animation__reta="property: position; 
                         to: 50 1.2 33; 
                         dur: 30000; 
                         easing: linear; 
                         startEvents: loaded, animationcomplete__reset_pos" 
        animation__curva_move="property: position; 
                               to: 56 1.2 2.5; 
                               dur: 5000; 
                               easing: easeOutQuad; 
                               startEvents: animationcomplete__reta"
        animation__curva_gira="property: rotation; 
                               to: 0 -90 0; 
                               dur: 2000; 
                               easing: easeOutQuad;
                               startEvents: animationcomplete__reta" 
        animation__reta_final="property: position;
                               to: 90 1.2 0;
                               dur: 3000;
                               easing: linear;
                               startEvents: animationcomplete__curva_move"
        animation__reset_pos="property: position; 
                              to: -30 1.2 33; 
                              dur: 0; 
                              startEvents: animationcomplete__reta_final"
                              
        animation__reset_rot="property: rotation; 
                              to: 0 -180 0; 
                              dur: 0; 
                              startEvents: animationcomplete__reta_final">
    </a-entity>

    <a-entity gltf-model="#lowrider"
       position="-29 0.5 3"
       scale="0.010 0.010 0.010"
       rotation="0 0 180"
       animation="property: rotation; 
                  from: 0 90 0; 
                  to: 10 90 0; 
                  dir: alternate; 
                  dur: 400; 
                  easing: easeOutQuad; 
                  loop: true"
      sound="src: #carro-musica; 
           autoplay: true;
           loop: true;
           volume: 1;
           positional: true;
           refDistance: 3;
           rolloffFactor: 1">
    </a-entity>

    <a-entity id="fila-roxo" position="-15 0 -1"></a-entity>
    <a-entity id="fila-verde" position="-15 0 6.2"></a-entity>
    <a-entity id="fila-azul" position="-15 0 31"></a-entity>
    <a-entity id="fila-amarelo" position="-15 0 38.2"></a-entity>
  
    <a-entity id="semaforo" position="3 3.1 2.5" rotation="0 -90 0" semaforo-control class="clickable">
      <a-box color="#333" depth="0.3" height="1.6" width="0.6"></a-box>
      <a-sphere id="red" position="0 0.6 0.2" radius="0.15" color="#300"></a-sphere>
      <a-sphere id="yellow" position="0 0.2 0.2" radius="0.15" color="#330"></a-sphere>
      <a-sphere id="green" position="0 -0.2 0.2" radius="0.15" color="#030"></a-sphere>   
    </a-entity>

    <a-camera position="0 2 6"> 
        <a-cursor 
          color="yellow" 
          fuse="false" 
          scale="1.5 1.5 1.5"
          animation__click="property: scale; startEvents: click; easing: easeInCubic; dur: 150; from: 0.1 0.1 0.1; to: 1 1 1"
          animation__fusing="property: scale; startEvents: fusing; easing: easeInCubic; dur: 1500; from: 1 1 1; to: 0.1 0.1 0.1"
          animation__mouseleave="property: scale; startEvents: mouseleave; easing: easeInCubic; dur: 500; to: 1 1 1">
        </a-cursor>
    </a-camera>

  </a-scene>

</body>
</html>